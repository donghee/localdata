<!doctype html>
<html>
  <title>Hello from Flask</title>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/flowbite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.6/datepicker.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.2"></script>

  </head>

  <body>
    <div class="max-w-5xl mx-auto">
      <a href="/">
        <h1 class="text-base font-semibold leading-6 text-gray-900 my-6">인허가 데이터 다운로드</h1>
      </a>
      <div class="lg:flex xl:max-w-screen-xl m-auto items-end justify-between py-6">
        
        <div class="w-1/2">
          <div date-rangepicker class="flex items-center" hx-trigger="change" hx-get="/update-data" hx-target="#localdata">

            <div class="relative">
              <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
              </div>
              <input name="start" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm
                rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500
                dark:focus:border-blue-500" placeholder="시작 날짜">
            </div>
            <span class="mx-4 text-gray-500">~</span>
            <div class="relative">
              <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                <svg aria-hidden="true" class="w-5 h-5 text-gray-500 dark:text-gray-400" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
              </div>
              <input name="end" type="text" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg
                focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5  dark:bg-gray-700
                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500
                dark:focus:border-blue-500" placeholder="마지막 날짜">
            </div>
          </div>
         </div>

        <div class="flex w-1/2 mx-4">
          <div class="w-1/2">
            <select id="location" name="location" class="mt-2 block w-full rounded-md border-0 py-2 pl-3 pr-10 text-gray-900 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6" hx-trigger="change" hx-get="/update-data" hx-target="#localdata">
              <option disabled selected value>지역 선택</option>
              <option>서울</option>
              <option>경기</option>
              <option>강원</option>
              <option>충청</option>
              <option>경상</option>
              <option>경북</option>
              <option>경남</option>
              <option>인천</option>
              <option>대전</option>
              <option>대구</option>
              <option>광주</option>
              <option>울산</option>
              <option>창원</option>
              <option>세종</option>
              <option>전라</option>
              <option>전북</option>
              <option>제주</option>
            </select>
          </div>

          <div class="sm:ml-16 sm:mt-0 sm:flex-none">
            <a href="{{ url_for('static', filename='output.csv') }}">
            <button type="button" class="block rounded-md bg-indigo-600 px-3 py-3 text-center text-sm font-semibold
                                 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2
                                 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">엑셀 생성</button>
            </a>
          </div>
        </div>
      </div>

      <!-- 데이터 -->
      <div class="px-2 sm:px-2 lg:px-2">
        <div class="mt-8 flow-root">
          <div class="-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
            <div id="localdata" class="inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8">
              {% include 'update-data.html' %}
            </div>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>
